@{
    ViewBag.Title = "Blackjack Game";
    var gameState = ViewBag.GameState != null ? Newtonsoft.Json.JsonConvert.DeserializeObject<dynamic>(ViewBag.GameState) : null;
}

<h1>Blackjack Game</h1>

@if (ViewBag.Error != null)
{
    <p style="color: red;">@ViewBag.Error</p>
}
else if (gameState != null)
{
    <h2>Current Game Status: @gameState.Message</h2>

    <div>
@*         <h3>Dealer's Hand</h3>
        <ul>
            @foreach (var card in gameState.dealerCards)
            {
                <li>@card.rank of @card.suit</li>
            }
        </ul> *@
        <p><strong>Dealer's Score: </strong>@gameState.dealerHandVal</p>
    </div>

    <div>
@*         <h3>Your Hand</h3>
        <ul>
            @foreach (var card in gameState.playerCards)
            {
                <li>@card.rank of @card.suit</li>
            }
        </ul> *@
        <p><strong>Your Score: </strong>@gameState.playerHandVal</p>
    </div>

    <div>
        @if (gameState.Message == "Player's Turn")
        {
            <form asp-action="Hit" method="post">
                <button type="submit">Hit</button>
            </form>

            <form asp-action="Stand" method="post">
                <button type="submit">Stand</button>
            </form>
        }
        else
        {
            <p>Game over! Click below to start a new game:</p>
            <form asp-action="Start" method="post">
                <button type="submit">Start New Game</button>
            </form>
        }
    </div>
}
else
{
    <p>Welcome to Blackjack! Click below to start a new game:</p>
    <form asp-action="Start" method="post">
        <button type="submit">Start Game</button>
    </form>
}